<!DOCTYPE html>
<html>
<head>
    <title>Earn NOT</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --primary: #FFD700;
            --secondary: #6C4AB6;
            --dark: #1A1A2E;
            --light: #F5F5F5;
            --card: #FFFFFF;
            --text: #333333;
            --border: #E0E0E0;
            --radius: 12px;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --card: #1F1B36;
                --light: #16213E;
                --text: #F5F5F5;
                --border: #2D3748;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            background: var(--light);
            color: var(--text);
            padding: 15px;
            padding-bottom: 80px;
        }

        /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .profile-pic {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary);
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .balance {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 1rem;
        }

        .balance-amount {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.2rem;
        }

        /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        /* ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶¨‡¶æ‡¶∞ */
        .progress-container {
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* ‡¶è‡¶° ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
        .ad-container {
            height: 200px;
            background: linear-gradient(135deg, var(--light) 0%, var(--border) 100%);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            border: 2px dashed var(--border);
        }

        /* ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: var(--radius);
            background: var(--primary);
            color: #000;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn:disabled {
            background: #CCCCCC;
            cursor: not-allowed;
        }

        /* ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: var(--text);
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--card);
            color: var(--text);
        }

        /* ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶ï‡ßã‡¶° */
        .referral-code {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .referral-code input {
            flex: 1;
            padding: 10px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
        }

        /* ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞ */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: none;
            border: none;
            color: var(--text);
            font-size: 0.7rem;
            cursor: pointer;
        }

        .nav-btn.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 1.4rem;
            margin-bottom: 3px;
        }

        /* ‡¶™‡ßá‡¶ú ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }
    </style>
    <script src='//libtl.com/sdk.js' data-zone='9722601' data-sdk='show_9722601'></script>
    <script src="https://ad.gigapub.tech/script?id=1770"></script>
    <script type="text/javascript" src="https://cdn.tgads.space/assets/js/adexium-widget.min.js"></script>
</head>
<body>
    <!-- ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
    <div class="header">
        <img id="user-avatar" class="profile-pic" src="https://i.pravatar.cc/150?img=3">
        <div class="user-info">
            <div class="user-name" id="user-name">Loading...</div>
            <div class="balance">
                <span>NOT:</span>
                <span class="balance-amount" id="balance">0</span>
            </div>
        </div>
    </div>

    <!-- ‡¶Æ‡ßá‡¶á‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü -->
    <div id="app-content">
        <!-- ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú -->
        <div class="page active" id="home-page">
            <div class="card">
                <div class="ad-container" id="ad-container">
                    <p>Watch ads to earn NOT</p>
                </div>
                <button class="btn pulse" id="watch-ad-btn">üëÅÔ∏è Watch Ad (+1 NotCoin)</button>
                <p style="text-align: center;">Reach 100 NOT to withdraw</p>
            </div>
        </div>

        <!-- ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡ßü ‡¶™‡ßá‡¶ú -->
        <div class="page" id="withdraw-page">
            <div class="card">
                <h3 style="margin-bottom: 15px;">Withdraw NOT</h3>
                <div class="input-group">
                    <label>Amount (Min: 100 NOT)</label>
                    <input type="number" id="withdraw-amount" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label>Payment Method</label>
                    <select id="withdraw-method">
                        <option value="usdt">USDT (TRC20)</option>
                        <option value="ton">TON</option>
                    </select>
                </div>
                <button class="btn" id="withdraw-btn">üí≥ Withdraw</button>
            </div>
        </div>

        <!-- ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶™‡ßá‡¶ú -->
        <div class="page" id="referral-page">
            <div class="card">
                <h3 style="margin-bottom: 15px;">Refer & Earn 10%</h3>
                <div class="referral-code">
                    <input type="text" id="ref-code" value="Loading..." readonly>
                    <button class="btn" id="copy-btn">üìã Copy</button>
                </div>
                <div style="margin: 15px 0;">
                    <p>Your referrals: <strong id="ref-count">0</strong></p>
                    <p>Earned from referrals: <strong id="ref-earnings">0</strong> NOT</p>
                </div>
            </div>
        </div>

        <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡ßá‡¶ú -->
        <div class="page" id="profile-page">
            <div class="card">
                <div style="text-align: center;">
                    <img id="profile-avatar" class="profile-pic" src="https://i.pravatar.cc/150?img=3" style="width: 80px; height: 80px; margin-bottom: 10px;">
                    <h3 id="profile-name">User Name</h3>
                    <p id="profile-username" style="color: var(--primary); margin: 5px 0;">@username</p>
                    <p>ID: <span id="profile-id">123456</span></p>
                </div>
                <div style="margin-top: 20px;">
                    <p>Total Earned: <strong id="total-earned">0</strong> NOT</p>
                    <p>Ads Watched: <strong id="ads-watched">0</strong></p>
                    <p>Joined: <strong id="join-date">2024-01-01</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- ‡¶¨‡¶ü‡¶Æ ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® -->
    <div class="nav-bar">
        <button class="nav-btn active" data-page="home-page">
            <span class="nav-icon">üè†</span>
            <span>Home</span>
        </button>
        <button class="nav-btn" data-page="withdraw-page">
            <span class="nav-icon">üí≥</span>
            <span>Withdraw</span>
        </button>
        <button class="nav-btn" data-page="referral-page">
            <span class="nav-icon">üë•</span>
            <span>Referral</span>
        </button>
        <button class="nav-btn" data-page="profile-page">
            <span class="nav-icon">üë§</span>
            <span>Profile</span>
        </button>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∏‡ßç‡¶ü‡ßá‡¶ü
        const state = {
            currentPage: 'home-page',
            user: {
                id: null,
                firstName: 'User',
                lastName: '',
                username: null,
                photoUrl: 'https://i.pravatar.cc/150?img=3',
                language: 'en'
            },
            balance: 0,
            totalEarned: 0,
            adsWatched: 0,
            referrals: 0,
            refEarnings: 0,
            joinDate: new Date().toISOString().split('T')[0],
            isWatchingAd: false
        };

        // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ì‡ßü‡ßá‡¶¨ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

        // DOM ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶∏
        const elements = {
            userAvatar: document.getElementById('user-avatar'),
            userName: document.getElementById('user-name'),
            balanceDisplay: document.getElementById('balance'),
            adContainer: document.getElementById('ad-container'),
            watchAdBtn: document.getElementById('watch-ad-btn'),
            withdrawAmount: document.getElementById('withdraw-amount'),
            withdrawBtn: document.getElementById('withdraw-btn'),
            refCode: document.getElementById('ref-code'),
            copyBtn: document.getElementById('copy-btn'),
            refCount: document.getElementById('ref-count'),
            refEarnings: document.getElementById('ref-earnings'),
            profileAvatar: document.getElementById('profile-avatar'),
            profileName: document.getElementById('profile-name'),
            profileUsername: document.getElementById('profile-username'),
            profileId: document.getElementById('profile-id'),
            totalEarned: document.getElementById('total-earned'),
            adsWatched: document.getElementById('ads-watched'),
            joinDate: document.getElementById('join-date'),
            navBtns: document.querySelectorAll('.nav-btn'),
            pages: document.querySelectorAll('.page')
        };

        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®
        function initApp() {
            // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
            loadTelegramUser();
            
            // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
            loadLocalData();
            state.currentPage = 'home-page';
            // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            updateUI();
            
            // ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
            setupEventListeners();
        }

        // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
        function loadTelegramUser() {
            const tgUser = Telegram.WebApp.initDataUnsafe.user;
            
            if (tgUser) {
                state.user.id = tgUser.id;
                state.user.firstName = tgUser.first_name || 'User';
                state.user.lastName = tgUser.last_name || '';
                state.user.username = tgUser.username ? `@${tgUser.username}` : null;
                state.user.photoUrl = tgUser.photo_url || state.user.photoUrl;
                state.user.language = tgUser.language_code || 'en';
            } else {
                // ‡¶°‡ßá‡¶Æ‡ßã ‡¶°‡¶æ‡¶ü‡¶æ
                state.user.id = Math.floor(Math.random() * 1000000);
                state.user.username = 'demo_user';
            }
        }

        // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
        function loadLocalData() {
            const savedData = localStorage.getItem(`earnNotCoinData_${state.user.id}`);
            if (savedData) {
                Object.assign(state, JSON.parse(savedData));
            }
        }

        // ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠
        function saveData() {
            localStorage.setItem(`earnNotCoinData_${state.user.id}`, JSON.stringify(state));
        }

        // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
        function updateUI() {
            // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶á‡¶®‡¶´‡ßã
            elements.userAvatar.src = state.user.photoUrl;
            elements.userName.textContent = state.user.firstName;
            elements.balanceDisplay.textContent = state.balance;
            
            // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶™‡ßá‡¶ú
            elements.refCode.value = `https://t.me/EarnNOT_bot?start=${state.user.id}`;
            elements.refCount.textContent = state.referrals;
            elements.refEarnings.textContent = state.refEarnings;
            
            // ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡ßá‡¶ú
            elements.profileAvatar.src = state.user.photoUrl;
            elements.profileName.textContent = state.user.firstName + (state.user.lastName ? ` ${state.user.lastName}` : '');
            elements.profileUsername.textContent = state.user.username || 'No username';
            elements.profileId.textContent = state.user.id;
            elements.totalEarned.textContent = state.totalEarned;
            elements.adsWatched.textContent = state.adsWatched;
            elements.joinDate.textContent = state.joinDate;
            
            // ‡¶™‡ßá‡¶ú ‡¶≠‡¶ø‡¶ú‡¶ø‡¶¨‡¶ø‡¶≤‡¶ø‡¶ü‡¶ø
            elements.pages.forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(state.currentPage).classList.add('active');
            
            // ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
            elements.navBtns.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.page === state.currentPage);
            });
            
            // ‡¶∏‡ßá‡¶≠ ‡¶°‡¶æ‡¶ü‡¶æ
            saveData();
        }

        // Ad ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        const adNetworks = {
            monetag: {
                name: "Monetag",
                loader: () => loadMonetagAd(),
                active: true
            },
            gigahub: {
                name: "GigaHub",
                loader: () => loadGigaHubAd(),
                active: true
            },
            adexium: {
                name: "Adexium",
                loader: () => loadAdexiumAd(),
                active: true
            }
        };
        
        // ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º Ad ‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
        const activeAdNetworks = Object.values(adNetworks).filter(network => network.active);
        
        // Ad ‡¶≤‡ßã‡¶°‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ó‡ßÅ‡¶≤‡ßã (watchAd() ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡ßá‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®)
        function loadMonetagAd() {
            return new Promise((resolve) => {
                show_9722601().then(() => {
                    resolve(); // Ad ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∂‡ßá‡¶∑ ‡¶π‡¶≤‡ßá
                }).catch(error => {
                    console.error("Monetag Ad failed:", error);
                    throw error;
                });
            });
        }
        
        function loadGigaHubAd() {
            return new Promise((resolve) => {
                window.showGiga()
                    .then(() => {
                        resolve();
                    })
                    .catch(error => {
                        console.error("GigaHub Ad failed:", error);
                        throw error;
                    });
            });
        }
        
        function loadAdexiumAd() {
            return new Promise((resolve) => {
                const adexiumWidget = new AdexiumWidget({
                    wid: '00dcf55b-e812-4fa5-8a54-89282141202e', 
                    adFormat: 'interstitial',
                    onClose: () => {
                        resolve();
                    }
                });
                adexiumWidget.show();
            });
        }
        
        // ‡¶®‡¶§‡ßÅ‡¶® watchAd() ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡ßÅ‡¶∞‡¶æ‡¶®‡ßã‡¶ü‡¶æ ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡ßá‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®)
        async function watchAd() {
            if (state.isWatchingAd || activeAdNetworks.length === 0) return;
            
            state.isWatchingAd = true;
            elements.watchAdBtn.disabled = true;
            elements.watchAdBtn.textContent = 'Loading Ad...';
        
            try {
                // ‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ Ad ‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶®
                const randomNetwork = activeAdNetworks[Math.floor(Math.random() * activeAdNetworks.length)];
                console.log(`Showing ${randomNetwork.name} Ad`);
        
                // Ad ‡¶≤‡ßã‡¶° ‡¶è‡¶¨‡¶Ç ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
                await randomNetwork.loader();
        
                // ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®
                state.balance += 1; // 1 NotCoin ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                state.totalEarned += 1;
                state.adsWatched += 1;
                
                updateUI();
                Telegram.WebApp.showAlert(`üéâ You earned 1 NotCoin!`);
        
            } catch (error) {
                console.error("Ad error:", error);
                Telegram.WebApp.showAlert("Ad failed to load. Please try again.");
            } finally {
                state.isWatchingAd = false;
                elements.watchAdBtn.disabled = false;
                elements.watchAdBtn.textContent = 'üëÅÔ∏è Watch Ad (+1 NotCoin)';
                elements.watchAdBtn.classList.add('pulse');
            }
        }
        // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡ßü ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü
        function submitWithdrawal() {
            const amount = parseInt(elements.withdrawAmount.value);
            
            if (isNaN(amount)) {
                Telegram.WebApp.showAlert('Please enter a valid amount');
                return;
            }
            
            if (amount < 100) {
                Telegram.WebApp.showAlert('Minimum withdrawal is 100 NotCoin');
                return;
            }
            
            if (amount > state.balance) {
                Telegram.WebApp.showAlert('Insufficient balance');
                return;
            }
            
            const method = document.getElementById('withdraw-method').value;
            
            // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡ßü ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü
            Telegram.WebApp.sendData(JSON.stringify({
                action: 'withdraw',
                amount: amount,
                method: method,
                userId: state.user.id
            }));
            
            // ‡¶°‡ßá‡¶Æ‡ßã ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            state.balance -= amount;
            updateUI();
            
            Telegram.WebApp.showAlert(`Withdrawal request of ${amount} NotCoin has been submitted!`);
        }

        // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶ï‡ßã‡¶° ‡¶ï‡¶™‡¶ø
        function copyReferralCode() {
            elements.refCode.select();
            document.execCommand('copy');
            Telegram.WebApp.showAlert('Referral link copied to clipboard!');
        }

        // ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
        function setupEventListeners() {
            // ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶®
            elements.navBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    state.currentPage = btn.dataset.page;
                    updateUI();
                });
            });
            
            // Ad ‡¶¨‡¶æ‡¶ü‡¶®
            elements.watchAdBtn.addEventListener('click', watchAd);
            
            // ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞‡ßü ‡¶¨‡¶æ‡¶ü‡¶®
            elements.withdrawBtn.addEventListener('click', submitWithdrawal);
            
            // ‡¶ï‡¶™‡¶ø ‡¶¨‡¶æ‡¶ü‡¶®
            elements.copyBtn.addEventListener('click', copyReferralCode);
            
            // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü
            Telegram.WebApp.onEvent('themeChanged', updateUI);
        }

        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∂‡ßÅ‡¶∞‡ßÅ
        initApp();
    </script>
</body>
    </html>
